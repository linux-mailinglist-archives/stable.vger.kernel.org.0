Return-Path: <stable-owner@vger.kernel.org>
X-Original-To: lists+stable@lfdr.de
Delivered-To: lists+stable@lfdr.de
Received: from vger.kernel.org (vger.kernel.org [209.132.180.67])
	by mail.lfdr.de (Postfix) with ESMTP id 4DE9CE6FFF
	for <lists+stable@lfdr.de>; Mon, 28 Oct 2019 11:53:56 +0100 (CET)
Received: (majordomo@vger.kernel.org) by vger.kernel.org via listexpand
        id S1729201AbfJ1Kxz (ORCPT <rfc822;lists+stable@lfdr.de>);
        Mon, 28 Oct 2019 06:53:55 -0400
Received: from inca-roads.misterjones.org ([213.251.177.50]:40571 "EHLO
        inca-roads.misterjones.org" rhost-flags-OK-OK-OK-OK)
        by vger.kernel.org with ESMTP id S1728554AbfJ1Kxz (ORCPT
        <rfc822;stable@vger.kernel.org>); Mon, 28 Oct 2019 06:53:55 -0400
Received: from [91.217.168.176] (helo=big-swifty.misterjones.org)
        by cheepnis.misterjones.org with esmtpsa (TLSv1.2:AES256-GCM-SHA384:256)
        (Exim 4.80)
        (envelope-from <maz@kernel.org>)
        id 1iP2en-00026J-7r; Mon, 28 Oct 2019 11:53:53 +0100
Date:   Mon, 28 Oct 2019 10:53:52 +0000
Message-ID: <86wocpxhrz.wl-maz@kernel.org>
From:   Marc Zyngier <maz@kernel.org>
To:     Sasha Levin <sashal@kernel.org>
Cc:     gregkh@linuxfoundation.org, marc.zyngier@arm.com,
        stable@vger.kernel.org, will@kernel.org
Subject: Re: FAILED: patch "[PATCH] arm64: Avoid Cavium TX2 erratum 219 when switching TTBR" failed to apply to 4.19-stable tree
In-Reply-To: <20191028091207.GL1560@sasha-vm>
References: <157218441316235@kroah.com>
        <20191028091207.GL1560@sasha-vm>
User-Agent: Wanderlust/2.15.9 (Almost Unreal) SEMI-EPG/1.14.7 (Harue)
 FLIM/1.14.9 (=?UTF-8?B?R29qxY0=?=) APEL/10.8 EasyPG/1.0.0 Emacs/26
 (aarch64-unknown-linux-gnu) MULE/6.0 (HANACHIRUSATO)
MIME-Version: 1.0 (generated by SEMI-EPG 1.14.7 - "Harue")
Content-Type: text/plain; charset=US-ASCII
X-SA-Exim-Connect-IP: 91.217.168.176
X-SA-Exim-Rcpt-To: sashal@kernel.org, gregkh@linuxfoundation.org, marc.zyngier@arm.com, stable@vger.kernel.org, will@kernel.org
X-SA-Exim-Mail-From: maz@kernel.org
X-SA-Exim-Scanned: No (on cheepnis.misterjones.org); SAEximRunCond expanded to false
Sender: stable-owner@vger.kernel.org
Precedence: bulk
List-ID: <stable.vger.kernel.org>
X-Mailing-List: stable@vger.kernel.org

On Mon, 28 Oct 2019 09:12:07 +0000,
Sasha Levin <sashal@kernel.org> wrote:
> 
> On Sun, Oct 27, 2019 at 02:53:33PM +0100, gregkh@linuxfoundation.org wrote:
> > 
> > The patch below does not apply to the 4.19-stable tree.
> > If someone wants it applied there, or to any other stable or longterm
> > tree, then please email the backport, including the original git commit
> > id to <stable@vger.kernel.org>.
> > 
> > thanks,
> > 
> > greg k-h
> > 
> > ------------------ original commit in Linus's tree ------------------
> > 
> > From 9405447ef79bc93101373e130f72e9e6cbf17dbb Mon Sep 17 00:00:00 2001
> > From: Marc Zyngier <maz@kernel.org>
> > Date: Tue, 9 Apr 2019 16:22:24 +0100
> > Subject: [PATCH] arm64: Avoid Cavium TX2 erratum 219 when switching TTBR
> > 
> > As a PRFM instruction racing against a TTBR update can have undesirable
> > effects on TX2, NOP-out such PRFM on cores that are affected by
> > the TX2-219 erratum.
> > 
> > Cc: <stable@vger.kernel.org>
> > Signed-off-by: Marc Zyngier <marc.zyngier@arm.com>
> > Signed-off-by: Will Deacon <will@kernel.org>
> 
> Rather than backporting this, we need to look into backporting the rest
> of the errata fixes. I'll look into that...

Yup. On its own, this workaround is pretty useless.

I have a 4.19 backport [1] that needs some testing (I don't have access to
a TX2 at the moment). 4.14 is "interesting" to backport (weird and
wonderful dependencies), but I'm not sure 4.9 has any value for this
HW (did it ever run 4.9?).

Thanks,

	M.

[1] https://git.kernel.org/pub/scm/linux/kernel/git/maz/arm-platforms.git/log/?h=stable-4.19/tx2-219

-- 
Jazz is not dead, it just smells funny.
