Return-Path: <stable-owner@vger.kernel.org>
X-Original-To: lists+stable@lfdr.de
Delivered-To: lists+stable@lfdr.de
Received: from vger.kernel.org (vger.kernel.org [209.132.180.67])
	by mail.lfdr.de (Postfix) with ESMTP id 60255131979
	for <lists+stable@lfdr.de>; Mon,  6 Jan 2020 21:32:54 +0100 (CET)
Received: (majordomo@vger.kernel.org) by vger.kernel.org via listexpand
        id S1726742AbgAFUcq (ORCPT <rfc822;lists+stable@lfdr.de>);
        Mon, 6 Jan 2020 15:32:46 -0500
Received: from mx2.suse.de ([195.135.220.15]:53828 "EHLO mx2.suse.de"
        rhost-flags-OK-OK-OK-OK) by vger.kernel.org with ESMTP
        id S1726657AbgAFUcp (ORCPT <rfc822;stable@vger.kernel.org>);
        Mon, 6 Jan 2020 15:32:45 -0500
X-Virus-Scanned: by amavisd-new at test-mx.suse.de
Received: from relay2.suse.de (unknown [195.135.220.254])
        by mx2.suse.de (Postfix) with ESMTP id 3958EAD79;
        Mon,  6 Jan 2020 20:32:44 +0000 (UTC)
Date:   Mon, 06 Jan 2020 21:32:43 +0100
Message-ID: <s5hd0bwgwb8.wl-tiwai@suse.de>
From:   Takashi Iwai <tiwai@suse.de>
To:     <gregkh@linuxfoundation.org>
Cc:     kailang@realtek.com, stable@vger.kernel.org
Subject: Re: FAILED: patch "[PATCH] ALSA: hda/realtek - Add Bass Speaker and fixed dac for bass" failed to apply to 5.4-stable tree
In-Reply-To: <1578312630193177@kroah.com>
References: <1578312630193177@kroah.com>
User-Agent: Wanderlust/2.15.9 (Almost Unreal) SEMI/1.14.6 (Maruoka)
 FLIM/1.14.9 (=?UTF-8?B?R29qxY0=?=) APEL/10.8 Emacs/25.3
 (x86_64-suse-linux-gnu) MULE/6.0 (HANACHIRUSATO)
MIME-Version: 1.0 (generated by SEMI 1.14.6 - "Maruoka")
Content-Type: text/plain; charset=US-ASCII
Sender: stable-owner@vger.kernel.org
Precedence: bulk
List-ID: <stable.vger.kernel.org>
X-Mailing-List: stable@vger.kernel.org

On Mon, 06 Jan 2020 13:10:30 +0100,
<gregkh@linuxfoundation.org> wrote:
> 
> 
> The patch below does not apply to the 5.4-stable tree.
> If someone wants it applied there, or to any other stable or longterm
> tree, then please email the backport, including the original git commit
> id to <stable@vger.kernel.org>.

Hm, I could cherry-pick the commit e79c22695abd (also commit
48e01504cf53 at next) cleanly on linux-5.4.y branch.

Could you try again?


thanks,

Takashi

> 
> thanks,
> 
> greg k-h
> 
> ------------------ original commit in Linus's tree ------------------
> 
> >From e79c22695abd3b75a6aecf4ea4b9607e8d82c49c Mon Sep 17 00:00:00 2001
> From: Kailang Yang <kailang@realtek.com>
> Date: Thu, 19 Dec 2019 14:12:15 +0800
> Subject: [PATCH] ALSA: hda/realtek - Add Bass Speaker and fixed dac for bass
>  speaker
> 
> Dell has new platform which has dual speaker connecting.
> They want dual speaker which use same dac for output.
> 
> Signed-off-by: Kailang Yang <kailang@realtek.com>
> Cc: <stable@vger.kernel.org>
> Link: https://lore.kernel.org/r/229c7efa2b474a16b7d8a916cd096b68@realtek.com
> Signed-off-by: Takashi Iwai <tiwai@suse.de>
> 
> diff --git a/sound/pci/hda/patch_realtek.c b/sound/pci/hda/patch_realtek.c
> index 5bc1a6d24333..2ee703c2da78 100644
> --- a/sound/pci/hda/patch_realtek.c
> +++ b/sound/pci/hda/patch_realtek.c
> @@ -5908,6 +5908,8 @@ enum {
>  	ALC294_FIXUP_ASUS_INTSPK_HEADSET_MIC,
>  	ALC256_FIXUP_MEDION_HEADSET_NO_PRESENCE,
>  	ALC294_FIXUP_ASUS_INTSPK_GPIO,
> +	ALC289_FIXUP_DELL_SPK2,
> +	ALC289_FIXUP_DUAL_SPK,
>  };
>  
>  static const struct hda_fixup alc269_fixups[] = {
> @@ -7009,6 +7011,21 @@ static const struct hda_fixup alc269_fixups[] = {
>  		.chained = true,
>  		.chain_id = ALC294_FIXUP_ASUS_INTSPK_HEADSET_MIC
>  	},
> +	[ALC289_FIXUP_DELL_SPK2] = {
> +		.type = HDA_FIXUP_PINS,
> +		.v.pins = (const struct hda_pintbl[]) {
> +			{ 0x17, 0x90170130 }, /* bass spk */
> +			{ }
> +		},
> +		.chained = true,
> +		.chain_id = ALC269_FIXUP_DELL4_MIC_NO_PRESENCE
> +	},
> +	[ALC289_FIXUP_DUAL_SPK] = {
> +		.type = HDA_FIXUP_FUNC,
> +		.v.func = alc285_fixup_speaker2_to_dac1,
> +		.chained = true,
> +		.chain_id = ALC289_FIXUP_DELL_SPK2
> +	},
>  };
>  
>  static const struct snd_pci_quirk alc269_fixup_tbl[] = {
> @@ -7081,6 +7098,8 @@ static const struct snd_pci_quirk alc269_fixup_tbl[] = {
>  	SND_PCI_QUIRK(0x1028, 0x08ad, "Dell WYSE AIO", ALC225_FIXUP_DELL_WYSE_AIO_MIC_NO_PRESENCE),
>  	SND_PCI_QUIRK(0x1028, 0x08ae, "Dell WYSE NB", ALC225_FIXUP_DELL1_MIC_NO_PRESENCE),
>  	SND_PCI_QUIRK(0x1028, 0x0935, "Dell", ALC274_FIXUP_DELL_AIO_LINEOUT_VERB),
> +	SND_PCI_QUIRK(0x1028, 0x097e, "Dell Precision", ALC289_FIXUP_DUAL_SPK),
> +	SND_PCI_QUIRK(0x1028, 0x097d, "Dell Precision", ALC289_FIXUP_DUAL_SPK),
>  	SND_PCI_QUIRK(0x1028, 0x164a, "Dell", ALC293_FIXUP_DELL1_MIC_NO_PRESENCE),
>  	SND_PCI_QUIRK(0x1028, 0x164b, "Dell", ALC293_FIXUP_DELL1_MIC_NO_PRESENCE),
>  	SND_PCI_QUIRK(0x103c, 0x1586, "HP", ALC269_FIXUP_HP_MUTE_LED_MIC2),
> 
