Return-Path: <stable-owner@vger.kernel.org>
X-Original-To: lists+stable@lfdr.de
Delivered-To: lists+stable@lfdr.de
Received: from out1.vger.email (out1.vger.email [IPv6:2620:137:e000::1:20])
	by mail.lfdr.de (Postfix) with ESMTP id 616C16BC662
	for <lists+stable@lfdr.de>; Thu, 16 Mar 2023 07:57:13 +0100 (CET)
Received: (majordomo@vger.kernel.org) by vger.kernel.org via listexpand
        id S229501AbjCPG5L (ORCPT <rfc822;lists+stable@lfdr.de>);
        Thu, 16 Mar 2023 02:57:11 -0400
Received: from lindbergh.monkeyblade.net ([23.128.96.19]:46252 "EHLO
        lindbergh.monkeyblade.net" rhost-flags-OK-OK-OK-OK) by vger.kernel.org
        with ESMTP id S229546AbjCPG5K (ORCPT
        <rfc822;stable@vger.kernel.org>); Thu, 16 Mar 2023 02:57:10 -0400
Received: from smtp-out2.suse.de (smtp-out2.suse.de [IPv6:2001:67c:2178:6::1d])
        by lindbergh.monkeyblade.net (Postfix) with ESMTPS id DCD7F9DE15;
        Wed, 15 Mar 2023 23:57:07 -0700 (PDT)
Received: from imap2.suse-dmz.suse.de (imap2.suse-dmz.suse.de [192.168.254.74])
        (using TLSv1.3 with cipher TLS_AES_256_GCM_SHA384 (256/256 bits)
         key-exchange X25519 server-signature ECDSA (P-521) server-digest SHA512)
        (No client certificate requested)
        by smtp-out2.suse.de (Postfix) with ESMTPS id B47411FDFB;
        Thu, 16 Mar 2023 06:57:05 +0000 (UTC)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=suse.de; s=susede2_rsa;
        t=1678949825; h=from:from:reply-to:date:date:message-id:message-id:to:to:cc:cc:
         mime-version:mime-version:content-type:content-type:
         in-reply-to:in-reply-to:references:references;
        bh=hU0Vaj6Egpw3gsmwckhir9z/m8Dta/ukfCMLBC38roY=;
        b=nQ3fzO5bgC27wpeoBEaD6J4Apjwd2T/YBSacxZ2r6nr7O7GHp5dg+AlU3YotK32IzEHCbJ
        KwfKjRiDnsv/xPCacllg5B1DcqLAFuc+yv4J3kJ2KFwub8zHx9ENLHne0luVQgc5JXPB/+
        SMJjkoCBVN0qK3hLddIqd3vlIhfzCxg=
DKIM-Signature: v=1; a=ed25519-sha256; c=relaxed/relaxed; d=suse.de;
        s=susede2_ed25519; t=1678949825;
        h=from:from:reply-to:date:date:message-id:message-id:to:to:cc:cc:
         mime-version:mime-version:content-type:content-type:
         in-reply-to:in-reply-to:references:references;
        bh=hU0Vaj6Egpw3gsmwckhir9z/m8Dta/ukfCMLBC38roY=;
        b=o5nKSE7hrp6WwncXmOyTKDBDjQpeiO7QUVQ6NMWH+lfYUcRnidA7RuaWGj4iQ5l72dMfhK
        venHChoGAv1xnkAg==
Received: from imap2.suse-dmz.suse.de (imap2.suse-dmz.suse.de [192.168.254.74])
        (using TLSv1.3 with cipher TLS_AES_256_GCM_SHA384 (256/256 bits)
         key-exchange X25519 server-signature ECDSA (P-521) server-digest SHA512)
        (No client certificate requested)
        by imap2.suse-dmz.suse.de (Postfix) with ESMTPS id 8A65713A2F;
        Thu, 16 Mar 2023 06:57:05 +0000 (UTC)
Received: from dovecot-director2.suse.de ([192.168.254.65])
        by imap2.suse-dmz.suse.de with ESMTPSA
        id lIj0IMG9EmSCdQAAMHmgww
        (envelope-from <tiwai@suse.de>); Thu, 16 Mar 2023 06:57:05 +0000
Date:   Thu, 16 Mar 2023 07:57:04 +0100
Message-ID: <877cvhji9r.wl-tiwai@suse.de>
From:   Takashi Iwai <tiwai@suse.de>
To:     tangmeng <tangmeng@uniontech.com>
Cc:     Takashi Iwai <tiwai@suse.de>,
        Jetro Jormalainen <jje-lxkl@jetro.fi>,
        regressions@lists.linux.dev, linux-kernel@vger.kernel.org,
        stable@vger.kernel.org
Subject: Re: [REGRESSION] External mic not working on Lenovo Ideapad U310, ALSA: hda/conexant: Add quirk for LENOVO 20149 Notebook model
In-Reply-To: <FB5EB3E66BC11752+d365c0b5-3ea6-c1d9-6e2d-9eaed541f6c1@uniontech.com>
References: <20230308215009.4d3e58a6@mopti>
        <87o7ou9jfi.wl-tiwai@suse.de>
        <927A9CC7D19E5BD6+6758c124-1a86-a981-d3cf-fa0da9ab589e@uniontech.com>
        <87a60djl5y.wl-tiwai@suse.de>
        <FB5EB3E66BC11752+d365c0b5-3ea6-c1d9-6e2d-9eaed541f6c1@uniontech.com>
User-Agent: Wanderlust/2.15.9 (Almost Unreal) Emacs/27.2 Mule/6.0
MIME-Version: 1.0 (generated by SEMI-EPG 1.14.7 - "Harue")
Content-Type: text/plain; charset=ISO-2022-JP
X-Spam-Status: No, score=-4.4 required=5.0 tests=BAYES_00,DKIM_SIGNED,
        DKIM_VALID,DKIM_VALID_AU,DKIM_VALID_EF,RCVD_IN_DNSWL_MED,SPF_HELO_NONE,
        SPF_PASS autolearn=ham autolearn_force=no version=3.4.6
X-Spam-Checker-Version: SpamAssassin 3.4.6 (2021-04-09) on
        lindbergh.monkeyblade.net
Precedence: bulk
List-ID: <stable.vger.kernel.org>
X-Mailing-List: stable@vger.kernel.org

On Thu, 16 Mar 2023 07:33:46 +0100,
tangmeng wrote:
> 
> 
> 
> On 2023/3/16 13:54, Takashi Iwai wrote:
> > Too bad.  So, if any, further fixes will be a guess work.
> > Do you know the codec vendor ID at least?
> > 
> From the information I saved as follows:
> 
> 制造商:  Intel Corporation
> 型  号:  Intel 7 Series/C216 Chipset Family High Definition Audio Controller
> 
> And by my pci.ids comparison, the corresponding should be 8086:1e20

That doesn't help much, unfortunately.  The interesting numbers are
found rather in /proc/asound/card*/codec* files.
I guess the HD-audio codec ID is same among other models, but it
should have a unique HD-audio codec subsystem id (SSID) 0x17aaXXXX.

And, through skimming over the net, I found that the PCI SSID
17aa:3977 hits a few more other Lenovo models.  It implies that
applying your change may likely break those others, too.
As a consequence, I'm afraid that we'll have to revert your change,
while keeping the quirk applicable via the model option.

If you need to fix it properly, please check the codec SSID, and use
that value instead of PCI SSID 17aa:3977.


Takashi
