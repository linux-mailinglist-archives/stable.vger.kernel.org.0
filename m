Return-Path: <stable-owner@vger.kernel.org>
X-Original-To: lists+stable@lfdr.de
Delivered-To: lists+stable@lfdr.de
Received: from vger.kernel.org (vger.kernel.org [23.128.96.18])
	by mail.lfdr.de (Postfix) with ESMTP id EE8A23E1CD9
	for <lists+stable@lfdr.de>; Thu,  5 Aug 2021 21:38:21 +0200 (CEST)
Received: (majordomo@vger.kernel.org) by vger.kernel.org via listexpand
        id S243065AbhHETif (ORCPT <rfc822;lists+stable@lfdr.de>);
        Thu, 5 Aug 2021 15:38:35 -0400
Received: from mail.kernel.org ([198.145.29.99]:36044 "EHLO mail.kernel.org"
        rhost-flags-OK-OK-OK-OK) by vger.kernel.org with ESMTP
        id S242990AbhHETie (ORCPT <rfc822;stable@vger.kernel.org>);
        Thu, 5 Aug 2021 15:38:34 -0400
Received: from oasis.local.home (cpe-66-24-58-225.stny.res.rr.com [66.24.58.225])
        (using TLSv1.2 with cipher ECDHE-RSA-AES256-GCM-SHA384 (256/256 bits))
        (No client certificate requested)
        by mail.kernel.org (Postfix) with ESMTPSA id 775CE61104;
        Thu,  5 Aug 2021 19:38:19 +0000 (UTC)
Date:   Thu, 5 Aug 2021 15:38:17 -0400
From:   Steven Rostedt <rostedt@goodmis.org>
To:     Mathieu Desnoyers <mathieu.desnoyers@efficios.com>
Cc:     Ingo Molnar <mingo@redhat.com>,
        Peter Zijlstra <peterz@infradead.org>,
        Andrew Morton <akpm@linux-foundation.org>,
        paulmck <paulmck@kernel.org>,
        Stefan Metzmacher <metze@samba.org>,
        stable <stable@vger.kernel.org>,
        linux-kernel <linux-kernel@vger.kernel.org>
Subject: Re: [PATCH 2/3] Fix: tracepoint: static call function vs data state
 mismatch (v2)
Message-ID: <20210805153817.1c82dcc6@oasis.local.home>
In-Reply-To: <1058325468.7289.1628190943244.JavaMail.zimbra@efficios.com>
References: <20210805132717.23813-1-mathieu.desnoyers@efficios.com>
        <20210805132717.23813-3-mathieu.desnoyers@efficios.com>
        <20210805145631.609e0a80@oasis.local.home>
        <1058325468.7289.1628190943244.JavaMail.zimbra@efficios.com>
X-Mailer: Claws Mail 3.17.3 (GTK+ 2.24.33; x86_64-pc-linux-gnu)
MIME-Version: 1.0
Content-Type: text/plain; charset=US-ASCII
Content-Transfer-Encoding: 7bit
Precedence: bulk
List-ID: <stable.vger.kernel.org>
X-Mailing-List: stable@vger.kernel.org

On Thu, 5 Aug 2021 15:15:43 -0400 (EDT)
Mathieu Desnoyers <mathieu.desnoyers@efficios.com> wrote:

> ----- On Aug 5, 2021, at 2:56 PM, rostedt rostedt@goodmis.org wrote:
> 
> > Note, there shouldn't be a "(v2)" outside the "[PATCH ]" part.
> > Otherwise it gets added into the git commit during "git am".  
> 
> Out of curiosity, do you know any way to annotate my local commits to have the
> [PATCH v2] tag automatically generated by git send-email ?

I pass -v2 to git send-email, and it adds the v2 for me.

> > This is a big enough regression, I'll even add a Fixes tag to the next
> > patch on the final sha1 of this patch! Such that this patch won't be
> > backported without the next patch.  
> 
> This makes sense. I still wanted to keep the two patches separate so we would
> introduce the (slow) state machine in the first patch, and optimize for
> speed in the second. My intent is to facilitate of small logical changes,
> and make bisection more precise in the future if we introduce an issue
> here.

I agree which is why I didn't ask you to fold them. The logic in this
code was a big enough change, where I agree it should be kept separate.
Unfortunately, it caused a huge performance regression :-(, but at the
same time, fixed a correctness issue, which Thomas always says that
correctness trumps performance.

But the compromise is to add a Fixes tag to the next patch and document
why they are separated, but still required to act as "one". I'll add
that commentary.

-- Steve

> 
> Calling out more clearly how slow things become with this patch is indeed
> important.
> 
> >   
> >> 
> 
