Return-Path: <stable-owner@vger.kernel.org>
X-Original-To: lists+stable@lfdr.de
Delivered-To: lists+stable@lfdr.de
Received: from vger.kernel.org (vger.kernel.org [23.128.96.18])
	by mail.lfdr.de (Postfix) with ESMTP id 1073D3D597E
	for <lists+stable@lfdr.de>; Mon, 26 Jul 2021 14:29:43 +0200 (CEST)
Received: (majordomo@vger.kernel.org) by vger.kernel.org via listexpand
        id S233990AbhGZLtJ (ORCPT <rfc822;lists+stable@lfdr.de>);
        Mon, 26 Jul 2021 07:49:09 -0400
Received: from esa2.mentor.iphmx.com ([68.232.141.98]:44968 "EHLO
        esa2.mentor.iphmx.com" rhost-flags-OK-OK-OK-OK) by vger.kernel.org
        with ESMTP id S233947AbhGZLtI (ORCPT
        <rfc822;stable@vger.kernel.org>); Mon, 26 Jul 2021 07:49:08 -0400
X-Greylist: delayed 431 seconds by postgrey-1.27 at vger.kernel.org; Mon, 26 Jul 2021 07:49:07 EDT
IronPort-SDR: 3CfLSnjHJYcbpE1v5LO0kRdoUdgQKFR8rMmZ4xYuWcps8eE5sGogMfdc5VroZY5/MW0ZmZkw4+
 5EioMDvpv2gcpSjxVO5g9m3H6iPapEGkNgUiL0+ktJk428mfI9vvmZlKQSs3jc3uEryr5b4kDm
 JK3tR0AdqcmHp7x6xEQAKrH2JNv+BSU7upgOBw36mcNEf+kM1JYywJ2xCSkSwvubbcgyzOoCkF
 CSSaqpCAQSPiIUbv41W/blfa4Qy2v/HuBBOXGlVwyOcAJg60EYHdAbSWE1oBFNEV+EU96MtSCr
 oTvIGqfcfCLgtWYh8MZcquNI
X-IronPort-AV: E=Sophos;i="5.84,270,1620720000"; 
   d="5'223?4'223,223?scan'223,223,208,223";a="63914912"
Received: from orw-gwy-01-in.mentorg.com ([192.94.38.165])
  by esa2.mentor.iphmx.com with ESMTP; 26 Jul 2021 04:22:25 -0800
IronPort-SDR: vDmZcEbhdNnr2pUW2+C4vuh/bJWiKXIUBBUn7PWrUMflyO3Kh/Sff3vF7609RCjVPyynJnUVKF
 gz/JZ6leBAZf1jm18HcX2gYdN+pmHJQPHbX9WSYJCBL1IwrCN4LorR/LDwNNfx8sz7IpfofNOG
 Q/ZI8G7+P6v9g+BW2MuzEslAlNY28rSaf2tUYKpi31HMwwkx/xhAvlVPDyeQfirYDxdLl1flLX
 5o7DbL1MLzwEZp+eVEZv/O1d4eRvHFfmgCzTewO6QHxeed/BDsjrWxWEMvQ7w/gW/wHniVYWIc
 Fq0=
From:   "Schmid, Carsten" <Carsten_Schmid@mentor.com>
To:     "Greg KH (gregkh@linuxfoundation.org)" <gregkh@linuxfoundation.org>
CC:     USB list <linux-usb@vger.kernel.org>,
        Mathias Nyman <mathias.nyman@linux.intel.com>,
        "stable@vger.kernel.org" <stable@vger.kernel.org>
Subject: RE: [PATCH for 4.14] xhci: add xhci_get_virt_ep() helper
Thread-Topic: [PATCH for 4.14] xhci: add xhci_get_virt_ep() helper
Thread-Index: AdeB/MZwIKb/vqPQSfySS+0zMoOZhgAAImUAAAI2DBD///GcgP//zcfQ
Date:   Mon, 26 Jul 2021 12:22:00 +0000
Message-ID: <bfeab6efc5b84cf38aa1c5436d9ce18b@SVR-IES-MBX-03.mgc.mentorg.com>
References: <3c42fbd4599a4a3e8b065418592973d9@SVR-IES-MBX-03.mgc.mentorg.com>
 <YP6IzGT6gZNgudI6@kroah.com>
 <9eb2f4a413eb40609f91daf52436cc7b@SVR-IES-MBX-03.mgc.mentorg.com>
 <YP6LkanQfzipHdOR@kroah.com>
In-Reply-To: <YP6LkanQfzipHdOR@kroah.com>
Accept-Language: de-DE, en-IE, en-US
Content-Language: en-US
X-MS-Has-Attach: yes
X-MS-TNEF-Correlator: 
x-ms-exchange-transport-fromentityheader: Hosted
x-originating-ip: [137.202.0.90]
Content-Type: multipart/mixed;
        boundary="_003_bfeab6efc5b84cf38aa1c5436d9ce18bSVRIESMBX03mgcmentorgco_"
MIME-Version: 1.0
Precedence: bulk
List-ID: <stable.vger.kernel.org>
X-Mailing-List: stable@vger.kernel.org

--_003_bfeab6efc5b84cf38aa1c5436d9ce18bSVRIESMBX03mgcmentorgco_
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64

SGkgR3JlZywNCg0KPj4NCj4+IE1heSBJIGF0dGFjaCB0aGUgcGF0Y2hlcyBhcyBhIGZpbGUsIGdl
bmVyYXRlZCB3aXRoICJnaXQgZm9ybWF0LXBhdGNoIiBtZWFud2hpbGU/DQo+PiBJIGZlYXIgdGhh
dCBJJ20gbm90IGFsbG93ZWQgdG8gdXNlICJnaXQgc2VuZC1tYWlsIi4NCj4NCj4gRm9yIGJhY2tw
b3J0cyBmb3IgdGhlIHN0YWJsZSB0cmVlLCB5ZXMsIEkgY2FuIGhhbmRsZSBhdHRhY2htZW50cyBq
dXN0IGZpbmUsIHlvdSBhcmUgbm90IHRoZSBvbmx5IGNvbXBhbnkgd2l0aCB0aGF0IHByb2JsZW0g
OikNCj4NCnBsZWFzZSBmaW5kIHRoZSBwYXRjaGVzIGF0dGFjaGVkLg0KMDAwMS14aGNpLWFkZC14
aGNpX2dldF92aXJ0X3NwLWhlbHBlci5wYXRjaC40IGZvciA0LjE0IGFuZCA0LjE5DQowMDAxLXho
Y2ktYWRkLXhoY2lfZ2V0X3ZpcnRfc3AtaGVscGVyLnBhdGNoLjUgZm9yIDUuNCBhbmQgNS4xMA0K
DQpBcHBsaWVkIGFuZCBjb21waWxlZCwgbm90IHRlc3RlZC4NCkFkZGVkIENjOiBzdGFibGVAdmdl
ci5rZXJuZWwub3JnIGluIGJvdGggcGF0Y2hlcy4NCg0KVGhhbmtzLA0KQ2Fyc3Rlbg0KLS0tLS0t
LS0tLS0tLS0tLS0NClNpZW1lbnMgRWxlY3Ryb25pYyBEZXNpZ24gQXV0b21hdGlvbiBHbWJIOyBB
bnNjaHJpZnQ6IEFybnVsZnN0cmHDn2UgMjAxLCA4MDYzNCBNw7xuY2hlbjsgR2VzZWxsc2NoYWZ0
IG1pdCBiZXNjaHLDpG5rdGVyIEhhZnR1bmc7IEdlc2Now6RmdHNmw7xocmVyOiBUaG9tYXMgSGV1
cnVuZywgRnJhbmsgVGjDvHJhdWY7IFNpdHogZGVyIEdlc2VsbHNjaGFmdDogTcO8bmNoZW47IFJl
Z2lzdGVyZ2VyaWNodCBNw7xuY2hlbiwgSFJCIDEwNjk1NQ0K

--_003_bfeab6efc5b84cf38aa1c5436d9ce18bSVRIESMBX03mgcmentorgco_
Content-Type: application/octet-stream;
	name="0001-xhci-add-xhci_get_virt_ep-helper.patch.4"
Content-Description: 0001-xhci-add-xhci_get_virt_ep-helper.patch.4
Content-Disposition: attachment;
	filename="0001-xhci-add-xhci_get_virt_ep-helper.patch.4"; size=5993;
	creation-date="Mon, 26 Jul 2021 12:15:53 GMT";
	modification-date="Mon, 26 Jul 2021 12:16:12 GMT"
Content-Transfer-Encoding: base64

RnJvbSA4NDlhZDAzYTFlNzdlYjEyM2Y1ZDhkZGVkYmZjYjA4YzhhZmRiNzdkIE1vbiBTZXAgMTcg
MDA6MDA6MDAgMjAwMQpGcm9tOiBNYXRoaWFzIE55bWFuIDxtYXRoaWFzLm55bWFuQGxpbnV4Lmlu
dGVsLmNvbT4KRGF0ZTogRnJpLCAyOSBKYW4gMjAyMSAxNTowMDoyMiArMDIwMApTdWJqZWN0OiBb
UEFUQ0hdIHhoY2k6IGFkZCB4aGNpX2dldF92aXJ0X2VwKCkgaGVscGVyCgpbY29tbWl0IGIxYWRj
NDJkNDQwZGYzMjMzMjU1ZTMxM2E0NWFiN2U5YjJiNzQwOTYgdXBzdHJlYW1dCgpJbiBzZXZlcmFs
IGV2ZW50IGhhbmRsZXJzIHdlIG5lZWQgdG8gZmluZCB0aGUgcmlnaHQgZW5kcG9pbnQKc3RydWN0
dXJlIGZyb20gc2xvdF9pZCBhbmQgZXBfaW5kZXggaW4gdGhlIGV2ZW50LgoKQWRkIGEgaGVscGVy
IGZvciB0aGlzLCBjaGVjayB0aGF0IHNsb3RfaWQgYW5kIGVwX2luZGV4IGFyZSB2YWxpZC4KCkNj
OiBzdGFibGVAdmdlci5rZXJuZWwub3JnClNpZ25lZC1vZmYtYnk6IE1hdGhpYXMgTnltYW4gPG1h
dGhpYXMubnltYW5AbGludXguaW50ZWwuY29tPgpMaW5rOiBodHRwczovL2xvcmUua2VybmVsLm9y
Zy9yLzIwMjEwMTI5MTMwMDQ0LjIwNjg1NS02LW1hdGhpYXMubnltYW5AbGludXguaW50ZWwuY29t
ClNpZ25lZC1vZmYtYnk6IEdyZWcgS3JvYWgtSGFydG1hbiA8Z3JlZ2toQGxpbnV4Zm91bmRhdGlv
bi5vcmc+ClNpZ25lZC1vZmYtYnk6IENhcnN0ZW4gU2NobWlkIDxjYXJzdGVuX3NjaG1pZEBtZW50
b3IuY29tPgotLS0KIGRyaXZlcnMvdXNiL2hvc3QveGhjaS1yaW5nLmMgfCA1OCArKysrKysrKysr
KysrKysrKysrKysrKysrKysrLS0tLS0tLS0KIGRyaXZlcnMvdXNiL2hvc3QveGhjaS5oICAgICAg
fCAgMyArLQogMiBmaWxlcyBjaGFuZ2VkLCA0NyBpbnNlcnRpb25zKCspLCAxNCBkZWxldGlvbnMo
LSkKCmRpZmYgLS1naXQgYS9kcml2ZXJzL3VzYi9ob3N0L3hoY2ktcmluZy5jIGIvZHJpdmVycy91
c2IvaG9zdC94aGNpLXJpbmcuYwppbmRleCA3NDhkNGM2OWNiMjguLjQyMGFkN2RjNGZlOCAxMDA2
NDQKLS0tIGEvZHJpdmVycy91c2IvaG9zdC94aGNpLXJpbmcuYworKysgYi9kcml2ZXJzL3VzYi9o
b3N0L3hoY2ktcmluZy5jCkBAIC00NDQsNiArNDQ0LDI2IEBAIHN0YXRpYyB2b2lkIHJpbmdfZG9v
cmJlbGxfZm9yX2FjdGl2ZV9yaW5ncyhzdHJ1Y3QgeGhjaV9oY2QgKnhoY2ksCiAJfQogfQogCitz
dGF0aWMgc3RydWN0IHhoY2lfdmlydF9lcCAqeGhjaV9nZXRfdmlydF9lcChzdHJ1Y3QgeGhjaV9o
Y2QgKnhoY2ksCisJCQkJCSAgICAgdW5zaWduZWQgaW50IHNsb3RfaWQsCisJCQkJCSAgICAgdW5z
aWduZWQgaW50IGVwX2luZGV4KQoreworCWlmIChzbG90X2lkID09IDAgfHwgc2xvdF9pZCA+PSBN
QVhfSENfU0xPVFMpIHsKKwkJeGhjaV93YXJuKHhoY2ksICJJbnZhbGlkIHNsb3RfaWQgJXVcbiIs
IHNsb3RfaWQpOworCQlyZXR1cm4gTlVMTDsKKwl9CisJaWYgKGVwX2luZGV4ID49IEVQX0NUWF9Q
RVJfREVWKSB7CisJCXhoY2lfd2Fybih4aGNpLCAiSW52YWxpZCBlbmRwb2ludCBpbmRleCAldVxu
IiwgZXBfaW5kZXgpOworCQlyZXR1cm4gTlVMTDsKKwl9CisJaWYgKCF4aGNpLT5kZXZzW3Nsb3Rf
aWRdKSB7CisJCXhoY2lfd2Fybih4aGNpLCAiTm8geGhjaSB2aXJ0IGRldmljZSBmb3Igc2xvdF9p
ZCAldVxuIiwgc2xvdF9pZCk7CisJCXJldHVybiBOVUxMOworCX0KKworCXJldHVybiAmeGhjaS0+
ZGV2c1tzbG90X2lkXS0+ZXBzW2VwX2luZGV4XTsKK30KKwogLyogR2V0IHRoZSByaWdodCByaW5n
IGZvciB0aGUgZ2l2ZW4gc2xvdF9pZCwgZXBfaW5kZXggYW5kIHN0cmVhbV9pZC4KICAqIElmIHRo
ZSBlbmRwb2ludCBzdXBwb3J0cyBzdHJlYW1zLCBib3VuZGFyeSBjaGVjayB0aGUgVVJCJ3Mgc3Ry
ZWFtIElELgogICogSWYgdGhlIGVuZHBvaW50IGRvZXNuJ3Qgc3VwcG9ydCBzdHJlYW1zLCByZXR1
cm4gdGhlIHNpbmd1bGFyIGVuZHBvaW50IHJpbmcuCkBAIC00NTQsNyArNDc0LDEwIEBAIHN0cnVj
dCB4aGNpX3JpbmcgKnhoY2lfdHJpYWRfdG9fdHJhbnNmZXJfcmluZyhzdHJ1Y3QgeGhjaV9oY2Qg
KnhoY2ksCiB7CiAJc3RydWN0IHhoY2lfdmlydF9lcCAqZXA7CiAKLQllcCA9ICZ4aGNpLT5kZXZz
W3Nsb3RfaWRdLT5lcHNbZXBfaW5kZXhdOworCWVwID0geGhjaV9nZXRfdmlydF9lcCh4aGNpLCBz
bG90X2lkLCBlcF9pbmRleCk7CisJaWYgKCFlcCkKKwkJcmV0dXJuIE5VTEw7CisKIAkvKiBDb21t
b24gY2FzZTogbm8gc3RyZWFtcyAqLwogCWlmICghKGVwLT5lcF9zdGF0ZSAmIEVQX0hBU19TVFJF
QU1TKSkKIAkJcmV0dXJuIGVwLT5yaW5nOwpAQCAtNzI5LDExICs3NTIsMTQgQEAgc3RhdGljIHZv
aWQgeGhjaV9oYW5kbGVfY21kX3N0b3BfZXAoc3RydWN0IHhoY2lfaGNkICp4aGNpLCBpbnQgc2xv
dF9pZCwKIAltZW1zZXQoJmRlcV9zdGF0ZSwgMCwgc2l6ZW9mKGRlcV9zdGF0ZSkpOwogCWVwX2lu
ZGV4ID0gVFJCX1RPX0VQX0lOREVYKGxlMzJfdG9fY3B1KHRyYi0+Z2VuZXJpYy5maWVsZFszXSkp
OwogCisJZXAgPSB4aGNpX2dldF92aXJ0X2VwKHhoY2ksIHNsb3RfaWQsIGVwX2luZGV4KTsKKwlp
ZiAoIWVwKQorCQlyZXR1cm47CisKIAl2ZGV2ID0geGhjaS0+ZGV2c1tzbG90X2lkXTsKIAllcF9j
dHggPSB4aGNpX2dldF9lcF9jdHgoeGhjaSwgdmRldi0+b3V0X2N0eCwgZXBfaW5kZXgpOwogCXRy
YWNlX3hoY2lfaGFuZGxlX2NtZF9zdG9wX2VwKGVwX2N0eCk7CiAKLQllcCA9ICZ4aGNpLT5kZXZz
W3Nsb3RfaWRdLT5lcHNbZXBfaW5kZXhdOwogCWxhc3RfdW5saW5rZWRfdGQgPSBsaXN0X2xhc3Rf
ZW50cnkoJmVwLT5jYW5jZWxsZWRfdGRfbGlzdCwKIAkJCXN0cnVjdCB4aGNpX3RkLCBjYW5jZWxs
ZWRfdGRfbGlzdCk7CiAKQEAgLTEwNTcsOSArMTA4MywxMSBAQCBzdGF0aWMgdm9pZCB4aGNpX2hh
bmRsZV9jbWRfc2V0X2RlcShzdHJ1Y3QgeGhjaV9oY2QgKnhoY2ksIGludCBzbG90X2lkLAogCiAJ
ZXBfaW5kZXggPSBUUkJfVE9fRVBfSU5ERVgobGUzMl90b19jcHUodHJiLT5nZW5lcmljLmZpZWxk
WzNdKSk7CiAJc3RyZWFtX2lkID0gVFJCX1RPX1NUUkVBTV9JRChsZTMyX3RvX2NwdSh0cmItPmdl
bmVyaWMuZmllbGRbMl0pKTsKLQlkZXYgPSB4aGNpLT5kZXZzW3Nsb3RfaWRdOwotCWVwID0gJmRl
di0+ZXBzW2VwX2luZGV4XTsKKwllcCA9IHhoY2lfZ2V0X3ZpcnRfZXAoeGhjaSwgc2xvdF9pZCwg
ZXBfaW5kZXgpOworCWlmICghZXApCisJCXJldHVybjsKIAorCWRldiA9IHhoY2ktPmRldnNbc2xv
dF9pZF07CiAJZXBfcmluZyA9IHhoY2lfc3RyZWFtX2lkX3RvX3JpbmcoZGV2LCBlcF9pbmRleCwg
c3RyZWFtX2lkKTsKIAlpZiAoIWVwX3JpbmcpIHsKIAkJeGhjaV93YXJuKHhoY2ksICJXQVJOIFNl
dCBUUiBkZXEgcHRyIGNvbW1hbmQgZm9yIGZyZWVkIHN0cmVhbSBJRCAldVxuIiwKQEAgLTExMzIs
OSArMTE2MCw5IEBAIHN0YXRpYyB2b2lkIHhoY2lfaGFuZGxlX2NtZF9zZXRfZGVxKHN0cnVjdCB4
aGNpX2hjZCAqeGhjaSwgaW50IHNsb3RfaWQsCiAJfQogCiBjbGVhbnVwOgotCWRldi0+ZXBzW2Vw
X2luZGV4XS5lcF9zdGF0ZSAmPSB+U0VUX0RFUV9QRU5ESU5HOwotCWRldi0+ZXBzW2VwX2luZGV4
XS5xdWV1ZWRfZGVxX3NlZyA9IE5VTEw7Ci0JZGV2LT5lcHNbZXBfaW5kZXhdLnF1ZXVlZF9kZXFf
cHRyID0gTlVMTDsKKwllcC0+ZXBfc3RhdGUgJj0gflNFVF9ERVFfUEVORElORzsKKwllcC0+cXVl
dWVkX2RlcV9zZWcgPSBOVUxMOworCWVwLT5xdWV1ZWRfZGVxX3B0ciA9IE5VTEw7CiAJLyogUmVz
dGFydCBhbnkgcmluZ3Mgd2l0aCBwZW5kaW5nIFVSQnMgKi8KIAlyaW5nX2Rvb3JiZWxsX2Zvcl9h
Y3RpdmVfcmluZ3MoeGhjaSwgc2xvdF9pZCwgZXBfaW5kZXgpOwogfQpAQCAtMTE0MywxMCArMTE3
MSwxNSBAQCBzdGF0aWMgdm9pZCB4aGNpX2hhbmRsZV9jbWRfcmVzZXRfZXAoc3RydWN0IHhoY2lf
aGNkICp4aGNpLCBpbnQgc2xvdF9pZCwKIAkJdW5pb24geGhjaV90cmIgKnRyYiwgdTMyIGNtZF9j
b21wX2NvZGUpCiB7CiAJc3RydWN0IHhoY2lfdmlydF9kZXZpY2UgKnZkZXY7CisJc3RydWN0IHho
Y2lfdmlydF9lcCAqZXA7CiAJc3RydWN0IHhoY2lfZXBfY3R4ICplcF9jdHg7CiAJdW5zaWduZWQg
aW50IGVwX2luZGV4OwogCiAJZXBfaW5kZXggPSBUUkJfVE9fRVBfSU5ERVgobGUzMl90b19jcHUo
dHJiLT5nZW5lcmljLmZpZWxkWzNdKSk7CisJZXAgPSB4aGNpX2dldF92aXJ0X2VwKHhoY2ksIHNs
b3RfaWQsIGVwX2luZGV4KTsKKwlpZiAoIWVwKQorCQlyZXR1cm47CisKIAl2ZGV2ID0geGhjaS0+
ZGV2c1tzbG90X2lkXTsKIAllcF9jdHggPSB4aGNpX2dldF9lcF9jdHgoeGhjaSwgdmRldi0+b3V0
X2N0eCwgZXBfaW5kZXgpOwogCXRyYWNlX3hoY2lfaGFuZGxlX2NtZF9yZXNldF9lcChlcF9jdHgp
OwpAQCAtMTE3Niw3ICsxMjA5LDcgQEAgc3RhdGljIHZvaWQgeGhjaV9oYW5kbGVfY21kX3Jlc2V0
X2VwKHN0cnVjdCB4aGNpX2hjZCAqeGhjaSwgaW50IHNsb3RfaWQsCiAJCXhoY2lfcmluZ19jbWRf
ZGIoeGhjaSk7CiAJfSBlbHNlIHsKIAkJLyogQ2xlYXIgb3VyIGludGVybmFsIGhhbHRlZCBzdGF0
ZSAqLwotCQl4aGNpLT5kZXZzW3Nsb3RfaWRdLT5lcHNbZXBfaW5kZXhdLmVwX3N0YXRlICY9IH5F
UF9IQUxURUQ7CisJCWVwLT5lcF9zdGF0ZSAmPSB+RVBfSEFMVEVEOwogCX0KIH0KIApAQCAtMjM1
MiwxNCArMjM4NSwxMyBAQCBzdGF0aWMgaW50IGhhbmRsZV90eF9ldmVudChzdHJ1Y3QgeGhjaV9o
Y2QgKnhoY2ksCiAJdHJiX2NvbXBfY29kZSA9IEdFVF9DT01QX0NPREUobGUzMl90b19jcHUoZXZl
bnQtPnRyYW5zZmVyX2xlbikpOwogCWVwX3RyYl9kbWEgPSBsZTY0X3RvX2NwdShldmVudC0+YnVm
ZmVyKTsKIAotCXhkZXYgPSB4aGNpLT5kZXZzW3Nsb3RfaWRdOwotCWlmICgheGRldikgewotCQl4
aGNpX2Vycih4aGNpLCAiRVJST1IgVHJhbnNmZXIgZXZlbnQgcG9pbnRlZCB0byBiYWQgc2xvdCAl
dVxuIiwKLQkJCSBzbG90X2lkKTsKKwllcCA9IHhoY2lfZ2V0X3ZpcnRfZXAoeGhjaSwgc2xvdF9p
ZCwgZXBfaW5kZXgpOworCWlmICghZXApIHsKKwkJeGhjaV9lcnIoeGhjaSwgIkVSUk9SIEludmFs
aWQgVHJhbnNmZXIgZXZlbnRcbiIpOwogCQlnb3RvIGVycl9vdXQ7CiAJfQogCi0JZXAgPSAmeGRl
di0+ZXBzW2VwX2luZGV4XTsKKwl4ZGV2ID0geGhjaS0+ZGV2c1tzbG90X2lkXTsKIAllcF9yaW5n
ID0geGhjaV9kbWFfdG9fdHJhbnNmZXJfcmluZyhlcCwgZXBfdHJiX2RtYSk7CiAJZXBfY3R4ID0g
eGhjaV9nZXRfZXBfY3R4KHhoY2ksIHhkZXYtPm91dF9jdHgsIGVwX2luZGV4KTsKIApkaWZmIC0t
Z2l0IGEvZHJpdmVycy91c2IvaG9zdC94aGNpLmggYi9kcml2ZXJzL3VzYi9ob3N0L3hoY2kuaApp
bmRleCA4YjUyYTc3NzNiYzguLjMwMDUwNmRlMGM3YSAxMDA2NDQKLS0tIGEvZHJpdmVycy91c2Iv
aG9zdC94aGNpLmgKKysrIGIvZHJpdmVycy91c2IvaG9zdC94aGNpLmgKQEAgLTk5MSw2ICs5OTEs
NyBAQCBzdHJ1Y3QgeGhjaV9pbnRlcnZhbF9id190YWJsZSB7CiAJdW5zaWduZWQgaW50CQlzc19i
d19vdXQ7CiB9OwogCisjZGVmaW5lIEVQX0NUWF9QRVJfREVWCQkzMQogCiBzdHJ1Y3QgeGhjaV92
aXJ0X2RldmljZSB7CiAJc3RydWN0IHVzYl9kZXZpY2UJCSp1ZGV2OwpAQCAtMTAwNSw3ICsxMDA2
LDcgQEAgc3RydWN0IHhoY2lfdmlydF9kZXZpY2UgewogCXN0cnVjdCB4aGNpX2NvbnRhaW5lcl9j
dHggICAgICAgKm91dF9jdHg7CiAJLyogVXNlZCBmb3IgYWRkcmVzc2luZyBkZXZpY2VzIGFuZCBj
b25maWd1cmF0aW9uIGNoYW5nZXMgKi8KIAlzdHJ1Y3QgeGhjaV9jb250YWluZXJfY3R4ICAgICAg
ICppbl9jdHg7Ci0Jc3RydWN0IHhoY2lfdmlydF9lcAkJZXBzWzMxXTsKKwlzdHJ1Y3QgeGhjaV92
aXJ0X2VwCQllcHNbRVBfQ1RYX1BFUl9ERVZdOwogCXU4CQkJCWZha2VfcG9ydDsKIAl1OAkJCQly
ZWFsX3BvcnQ7CiAJc3RydWN0IHhoY2lfaW50ZXJ2YWxfYndfdGFibGUJKmJ3X3RhYmxlOwotLSAK
Mi4xNy4xCgo=

--_003_bfeab6efc5b84cf38aa1c5436d9ce18bSVRIESMBX03mgcmentorgco_
Content-Type: application/octet-stream;
	name="0001-xhci-add-xhci_get_virt_ep-helper.patch.5"
Content-Description: 0001-xhci-add-xhci_get_virt_ep-helper.patch.5
Content-Disposition: attachment;
	filename="0001-xhci-add-xhci_get_virt_ep-helper.patch.5"; size=6090;
	creation-date="Mon, 26 Jul 2021 12:15:54 GMT";
	modification-date="Mon, 26 Jul 2021 12:16:12 GMT"
Content-Transfer-Encoding: base64

RnJvbSBjNTdlY2YxY2QyZmM3ZDRjMzU2NDZmNjNmMWNjYTZlNTI0NzY2NjRlIE1vbiBTZXAgMTcg
MDA6MDA6MDAgMjAwMQpGcm9tOiBNYXRoaWFzIE55bWFuIDxtYXRoaWFzLm55bWFuQGxpbnV4Lmlu
dGVsLmNvbT4KRGF0ZTogRnJpLCAyOSBKYW4gMjAyMSAxNTowMDoyMiArMDIwMApTdWJqZWN0OiBb
UEFUQ0hdIHhoY2k6IGFkZCB4aGNpX2dldF92aXJ0X2VwKCkgaGVscGVyCgpbY29tbWl0IGIxYWRj
NDJkNDQwZGYzMjMzMjU1ZTMxM2E0NWFiN2U5YjJiNzQwOTYgdXBzdHJlYW1dCgpJbiBzZXZlcmFs
IGV2ZW50IGhhbmRsZXJzIHdlIG5lZWQgdG8gZmluZCB0aGUgcmlnaHQgZW5kcG9pbnQKc3RydWN0
dXJlIGZyb20gc2xvdF9pZCBhbmQgZXBfaW5kZXggaW4gdGhlIGV2ZW50LgoKQWRkIGEgaGVscGVy
IGZvciB0aGlzLCBjaGVjayB0aGF0IHNsb3RfaWQgYW5kIGVwX2luZGV4IGFyZSB2YWxpZC4KCkNj
OiBzdGFibGVAdmdlci5rZXJuZWwub3JnClNpZ25lZC1vZmYtYnk6IE1hdGhpYXMgTnltYW4gPG1h
dGhpYXMubnltYW5AbGludXguaW50ZWwuY29tPgpMaW5rOiBodHRwczovL2xvcmUua2VybmVsLm9y
Zy9yLzIwMjEwMTI5MTMwMDQ0LjIwNjg1NS02LW1hdGhpYXMubnltYW5AbGludXguaW50ZWwuY29t
ClNpZ25lZC1vZmYtYnk6IEdyZWcgS3JvYWgtSGFydG1hbiA8Z3JlZ2toQGxpbnV4Zm91bmRhdGlv
bi5vcmc+ClNpZ25lZC1vZmYtYnk6IENhcnN0ZW4gU2NobWlkIDxjYXJzdGVuX3NjaG1pZEBtZW50
b3IuY29tPgotLS0KIGRyaXZlcnMvdXNiL2hvc3QveGhjaS1yaW5nLmMgfCA1OCArKysrKysrKysr
KysrKysrKysrKysrKysrKysrLS0tLS0tLS0KIGRyaXZlcnMvdXNiL2hvc3QveGhjaS5oICAgICAg
fCAgMyArLQogMiBmaWxlcyBjaGFuZ2VkLCA0NyBpbnNlcnRpb25zKCspLCAxNCBkZWxldGlvbnMo
LSkKCmRpZmYgLS1naXQgYS9kcml2ZXJzL3VzYi9ob3N0L3hoY2ktcmluZy5jIGIvZHJpdmVycy91
c2IvaG9zdC94aGNpLXJpbmcuYwppbmRleCBmNmI1MDEwZGViNzMuLjEyMjhiM2Q5MmRiMCAxMDA2
NDQKLS0tIGEvZHJpdmVycy91c2IvaG9zdC94aGNpLXJpbmcuYworKysgYi9kcml2ZXJzL3VzYi9o
b3N0L3hoY2ktcmluZy5jCkBAIC00NDAsNiArNDQwLDI2IEBAIHZvaWQgeGhjaV9yaW5nX2Rvb3Ji
ZWxsX2Zvcl9hY3RpdmVfcmluZ3Moc3RydWN0IHhoY2lfaGNkICp4aGNpLAogCXJpbmdfZG9vcmJl
bGxfZm9yX2FjdGl2ZV9yaW5ncyh4aGNpLCBzbG90X2lkLCBlcF9pbmRleCk7CiB9CiAKK3N0YXRp
YyBzdHJ1Y3QgeGhjaV92aXJ0X2VwICp4aGNpX2dldF92aXJ0X2VwKHN0cnVjdCB4aGNpX2hjZCAq
eGhjaSwKKwkJCQkJICAgICB1bnNpZ25lZCBpbnQgc2xvdF9pZCwKKwkJCQkJICAgICB1bnNpZ25l
ZCBpbnQgZXBfaW5kZXgpCit7CisJaWYgKHNsb3RfaWQgPT0gMCB8fCBzbG90X2lkID49IE1BWF9I
Q19TTE9UUykgeworCQl4aGNpX3dhcm4oeGhjaSwgIkludmFsaWQgc2xvdF9pZCAldVxuIiwgc2xv
dF9pZCk7CisJCXJldHVybiBOVUxMOworCX0KKwlpZiAoZXBfaW5kZXggPj0gRVBfQ1RYX1BFUl9E
RVYpIHsKKwkJeGhjaV93YXJuKHhoY2ksICJJbnZhbGlkIGVuZHBvaW50IGluZGV4ICV1XG4iLCBl
cF9pbmRleCk7CisJCXJldHVybiBOVUxMOworCX0KKwlpZiAoIXhoY2ktPmRldnNbc2xvdF9pZF0p
IHsKKwkJeGhjaV93YXJuKHhoY2ksICJObyB4aGNpIHZpcnQgZGV2aWNlIGZvciBzbG90X2lkICV1
XG4iLCBzbG90X2lkKTsKKwkJcmV0dXJuIE5VTEw7CisJfQorCisJcmV0dXJuICZ4aGNpLT5kZXZz
W3Nsb3RfaWRdLT5lcHNbZXBfaW5kZXhdOworfQorCiAvKiBHZXQgdGhlIHJpZ2h0IHJpbmcgZm9y
IHRoZSBnaXZlbiBzbG90X2lkLCBlcF9pbmRleCBhbmQgc3RyZWFtX2lkLgogICogSWYgdGhlIGVu
ZHBvaW50IHN1cHBvcnRzIHN0cmVhbXMsIGJvdW5kYXJ5IGNoZWNrIHRoZSBVUkIncyBzdHJlYW0g
SUQuCiAgKiBJZiB0aGUgZW5kcG9pbnQgZG9lc24ndCBzdXBwb3J0IHN0cmVhbXMsIHJldHVybiB0
aGUgc2luZ3VsYXIgZW5kcG9pbnQgcmluZy4KQEAgLTQ1MCw3ICs0NzAsMTAgQEAgc3RydWN0IHho
Y2lfcmluZyAqeGhjaV90cmlhZF90b190cmFuc2Zlcl9yaW5nKHN0cnVjdCB4aGNpX2hjZCAqeGhj
aSwKIHsKIAlzdHJ1Y3QgeGhjaV92aXJ0X2VwICplcDsKIAotCWVwID0gJnhoY2ktPmRldnNbc2xv
dF9pZF0tPmVwc1tlcF9pbmRleF07CisJZXAgPSB4aGNpX2dldF92aXJ0X2VwKHhoY2ksIHNsb3Rf
aWQsIGVwX2luZGV4KTsKKwlpZiAoIWVwKQorCQlyZXR1cm4gTlVMTDsKKwogCS8qIENvbW1vbiBj
YXNlOiBubyBzdHJlYW1zICovCiAJaWYgKCEoZXAtPmVwX3N0YXRlICYgRVBfSEFTX1NUUkVBTVMp
KQogCQlyZXR1cm4gZXAtPnJpbmc7CkBAIC03NDMsMTEgKzc2NiwxNCBAQCBzdGF0aWMgdm9pZCB4
aGNpX2hhbmRsZV9jbWRfc3RvcF9lcChzdHJ1Y3QgeGhjaV9oY2QgKnhoY2ksIGludCBzbG90X2lk
LAogCW1lbXNldCgmZGVxX3N0YXRlLCAwLCBzaXplb2YoZGVxX3N0YXRlKSk7CiAJZXBfaW5kZXgg
PSBUUkJfVE9fRVBfSU5ERVgobGUzMl90b19jcHUodHJiLT5nZW5lcmljLmZpZWxkWzNdKSk7CiAK
KwllcCA9IHhoY2lfZ2V0X3ZpcnRfZXAoeGhjaSwgc2xvdF9pZCwgZXBfaW5kZXgpOworCWlmICgh
ZXApCisJCXJldHVybjsKKwogCXZkZXYgPSB4aGNpLT5kZXZzW3Nsb3RfaWRdOwogCWVwX2N0eCA9
IHhoY2lfZ2V0X2VwX2N0eCh4aGNpLCB2ZGV2LT5vdXRfY3R4LCBlcF9pbmRleCk7CiAJdHJhY2Vf
eGhjaV9oYW5kbGVfY21kX3N0b3BfZXAoZXBfY3R4KTsKIAotCWVwID0gJnhoY2ktPmRldnNbc2xv
dF9pZF0tPmVwc1tlcF9pbmRleF07CiAJbGFzdF91bmxpbmtlZF90ZCA9IGxpc3RfbGFzdF9lbnRy
eSgmZXAtPmNhbmNlbGxlZF90ZF9saXN0LAogCQkJc3RydWN0IHhoY2lfdGQsIGNhbmNlbGxlZF90
ZF9saXN0KTsKIApAQCAtMTA2OCw5ICsxMDk0LDExIEBAIHN0YXRpYyB2b2lkIHhoY2lfaGFuZGxl
X2NtZF9zZXRfZGVxKHN0cnVjdCB4aGNpX2hjZCAqeGhjaSwgaW50IHNsb3RfaWQsCiAKIAllcF9p
bmRleCA9IFRSQl9UT19FUF9JTkRFWChsZTMyX3RvX2NwdSh0cmItPmdlbmVyaWMuZmllbGRbM10p
KTsKIAlzdHJlYW1faWQgPSBUUkJfVE9fU1RSRUFNX0lEKGxlMzJfdG9fY3B1KHRyYi0+Z2VuZXJp
Yy5maWVsZFsyXSkpOwotCWRldiA9IHhoY2ktPmRldnNbc2xvdF9pZF07Ci0JZXAgPSAmZGV2LT5l
cHNbZXBfaW5kZXhdOworCWVwID0geGhjaV9nZXRfdmlydF9lcCh4aGNpLCBzbG90X2lkLCBlcF9p
bmRleCk7CisJaWYgKCFlcCkKKwkJcmV0dXJuOwogCisJZGV2ID0geGhjaS0+ZGV2c1tzbG90X2lk
XTsKIAllcF9yaW5nID0geGhjaV9zdHJlYW1faWRfdG9fcmluZyhkZXYsIGVwX2luZGV4LCBzdHJl
YW1faWQpOwogCWlmICghZXBfcmluZykgewogCQl4aGNpX3dhcm4oeGhjaSwgIldBUk4gU2V0IFRS
IGRlcSBwdHIgY29tbWFuZCBmb3IgZnJlZWQgc3RyZWFtIElEICV1XG4iLApAQCAtMTE0Myw5ICsx
MTcxLDkgQEAgc3RhdGljIHZvaWQgeGhjaV9oYW5kbGVfY21kX3NldF9kZXEoc3RydWN0IHhoY2lf
aGNkICp4aGNpLCBpbnQgc2xvdF9pZCwKIAl9CiAKIGNsZWFudXA6Ci0JZGV2LT5lcHNbZXBfaW5k
ZXhdLmVwX3N0YXRlICY9IH5TRVRfREVRX1BFTkRJTkc7Ci0JZGV2LT5lcHNbZXBfaW5kZXhdLnF1
ZXVlZF9kZXFfc2VnID0gTlVMTDsKLQlkZXYtPmVwc1tlcF9pbmRleF0ucXVldWVkX2RlcV9wdHIg
PSBOVUxMOworCWVwLT5lcF9zdGF0ZSAmPSB+U0VUX0RFUV9QRU5ESU5HOworCWVwLT5xdWV1ZWRf
ZGVxX3NlZyA9IE5VTEw7CisJZXAtPnF1ZXVlZF9kZXFfcHRyID0gTlVMTDsKIAkvKiBSZXN0YXJ0
IGFueSByaW5ncyB3aXRoIHBlbmRpbmcgVVJCcyAqLwogCXJpbmdfZG9vcmJlbGxfZm9yX2FjdGl2
ZV9yaW5ncyh4aGNpLCBzbG90X2lkLCBlcF9pbmRleCk7CiB9CkBAIC0xMTU0LDEwICsxMTgyLDE1
IEBAIHN0YXRpYyB2b2lkIHhoY2lfaGFuZGxlX2NtZF9yZXNldF9lcChzdHJ1Y3QgeGhjaV9oY2Qg
KnhoY2ksIGludCBzbG90X2lkLAogCQl1bmlvbiB4aGNpX3RyYiAqdHJiLCB1MzIgY21kX2NvbXBf
Y29kZSkKIHsKIAlzdHJ1Y3QgeGhjaV92aXJ0X2RldmljZSAqdmRldjsKKwlzdHJ1Y3QgeGhjaV92
aXJ0X2VwICplcDsKIAlzdHJ1Y3QgeGhjaV9lcF9jdHggKmVwX2N0eDsKIAl1bnNpZ25lZCBpbnQg
ZXBfaW5kZXg7CiAKIAllcF9pbmRleCA9IFRSQl9UT19FUF9JTkRFWChsZTMyX3RvX2NwdSh0cmIt
PmdlbmVyaWMuZmllbGRbM10pKTsKKwllcCA9IHhoY2lfZ2V0X3ZpcnRfZXAoeGhjaSwgc2xvdF9p
ZCwgZXBfaW5kZXgpOworCWlmICghZXApCisJCXJldHVybjsKKwogCXZkZXYgPSB4aGNpLT5kZXZz
W3Nsb3RfaWRdOwogCWVwX2N0eCA9IHhoY2lfZ2V0X2VwX2N0eCh4aGNpLCB2ZGV2LT5vdXRfY3R4
LCBlcF9pbmRleCk7CiAJdHJhY2VfeGhjaV9oYW5kbGVfY21kX3Jlc2V0X2VwKGVwX2N0eCk7CkBA
IC0xMTg3LDcgKzEyMjAsNyBAQCBzdGF0aWMgdm9pZCB4aGNpX2hhbmRsZV9jbWRfcmVzZXRfZXAo
c3RydWN0IHhoY2lfaGNkICp4aGNpLCBpbnQgc2xvdF9pZCwKIAkJeGhjaV9yaW5nX2NtZF9kYih4
aGNpKTsKIAl9IGVsc2UgewogCQkvKiBDbGVhciBvdXIgaW50ZXJuYWwgaGFsdGVkIHN0YXRlICov
Ci0JCXhoY2ktPmRldnNbc2xvdF9pZF0tPmVwc1tlcF9pbmRleF0uZXBfc3RhdGUgJj0gfkVQX0hB
TFRFRDsKKwkJZXAtPmVwX3N0YXRlICY9IH5FUF9IQUxURUQ7CiAJfQogCiAJLyogaWYgdGhpcyB3
YXMgYSBzb2Z0IHJlc2V0LCB0aGVuIHJlc3RhcnQgKi8KQEAgLTIzNTYsMTQgKzIzODksMTMgQEAg
c3RhdGljIGludCBoYW5kbGVfdHhfZXZlbnQoc3RydWN0IHhoY2lfaGNkICp4aGNpLAogCXRyYl9j
b21wX2NvZGUgPSBHRVRfQ09NUF9DT0RFKGxlMzJfdG9fY3B1KGV2ZW50LT50cmFuc2Zlcl9sZW4p
KTsKIAllcF90cmJfZG1hID0gbGU2NF90b19jcHUoZXZlbnQtPmJ1ZmZlcik7CiAKLQl4ZGV2ID0g
eGhjaS0+ZGV2c1tzbG90X2lkXTsKLQlpZiAoIXhkZXYpIHsKLQkJeGhjaV9lcnIoeGhjaSwgIkVS
Uk9SIFRyYW5zZmVyIGV2ZW50IHBvaW50ZWQgdG8gYmFkIHNsb3QgJXVcbiIsCi0JCQkgc2xvdF9p
ZCk7CisJZXAgPSB4aGNpX2dldF92aXJ0X2VwKHhoY2ksIHNsb3RfaWQsIGVwX2luZGV4KTsKKwlp
ZiAoIWVwKSB7CisJCXhoY2lfZXJyKHhoY2ksICJFUlJPUiBJbnZhbGlkIFRyYW5zZmVyIGV2ZW50
XG4iKTsKIAkJZ290byBlcnJfb3V0OwogCX0KIAotCWVwID0gJnhkZXYtPmVwc1tlcF9pbmRleF07
CisJeGRldiA9IHhoY2ktPmRldnNbc2xvdF9pZF07CiAJZXBfcmluZyA9IHhoY2lfZG1hX3RvX3Ry
YW5zZmVyX3JpbmcoZXAsIGVwX3RyYl9kbWEpOwogCWVwX2N0eCA9IHhoY2lfZ2V0X2VwX2N0eCh4
aGNpLCB4ZGV2LT5vdXRfY3R4LCBlcF9pbmRleCk7CiAKZGlmZiAtLWdpdCBhL2RyaXZlcnMvdXNi
L2hvc3QveGhjaS5oIGIvZHJpdmVycy91c2IvaG9zdC94aGNpLmgKaW5kZXggODc5OGVkMDMxNzg2
Li44MzRmMzJmZTk5MzAgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvdXNiL2hvc3QveGhjaS5oCisrKyBi
L2RyaXZlcnMvdXNiL2hvc3QveGhjaS5oCkBAIC05OTMsNiArOTkzLDcgQEAgc3RydWN0IHhoY2lf
aW50ZXJ2YWxfYndfdGFibGUgewogCXVuc2lnbmVkIGludAkJc3NfYndfb3V0OwogfTsKIAorI2Rl
ZmluZSBFUF9DVFhfUEVSX0RFVgkJMzEKIAogc3RydWN0IHhoY2lfdmlydF9kZXZpY2UgewogCXN0
cnVjdCB1c2JfZGV2aWNlCQkqdWRldjsKQEAgLTEwMDcsNyArMTAwOCw3IEBAIHN0cnVjdCB4aGNp
X3ZpcnRfZGV2aWNlIHsKIAlzdHJ1Y3QgeGhjaV9jb250YWluZXJfY3R4ICAgICAgICpvdXRfY3R4
OwogCS8qIFVzZWQgZm9yIGFkZHJlc3NpbmcgZGV2aWNlcyBhbmQgY29uZmlndXJhdGlvbiBjaGFu
Z2VzICovCiAJc3RydWN0IHhoY2lfY29udGFpbmVyX2N0eCAgICAgICAqaW5fY3R4OwotCXN0cnVj
dCB4aGNpX3ZpcnRfZXAJCWVwc1szMV07CisJc3RydWN0IHhoY2lfdmlydF9lcAkJZXBzW0VQX0NU
WF9QRVJfREVWXTsKIAl1OAkJCQlmYWtlX3BvcnQ7CiAJdTgJCQkJcmVhbF9wb3J0OwogCXN0cnVj
dCB4aGNpX2ludGVydmFsX2J3X3RhYmxlCSpid190YWJsZTsKLS0gCjIuMTcuMQoK

--_003_bfeab6efc5b84cf38aa1c5436d9ce18bSVRIESMBX03mgcmentorgco_--
